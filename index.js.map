{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"49001064-c7b72e374a4ae6399075933f6\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport let currentPage = 1; \n\nexport function resetPage() {\n    currentPage = 1;  \n}\n\nexport async function fetchImages(query) {\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: 40,\n        page: currentPage,\n    };\n\n    try {\n        const response = await axios.get(BASE_URL, { params });\n        currentPage += 1; \n        return response.data;\n    } catch (error) {\n        console.error(\"Error fetching images:\", error);\n        throw error;\n    }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst loader = document.querySelector(\".loader\"); \n\nexport function showLoader() {\n    loader.classList.remove(\"hidden\");\n}\n\nexport function hideLoader() {\n    loader.classList.add(\"hidden\");\n}\n\nexport function clearGallery() {\n    document.getElementById(\"gallery\").innerHTML = \"\";\n}\n\nexport function displayImages(images) {\n  const gallery = document.getElementById(\"gallery\");\n\n  images.forEach(image => {\n      const listItem = document.createElement(\"li\");\n      listItem.classList.add(\"gallery-item\");\n\n      listItem.innerHTML = `\n      <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery-image\" />\n      </a>\n      <div class=\"info\">\n          <p>Likes <span>${image.likes}</span></p>\n          <p>Views <span>${image.views}</span></p>\n          <p>Comments <span>${image.comments}</span></p>\n          <p>Downloads <span>${image.downloads}</span></p>\n      </div>\n  `;\n\n      gallery.appendChild(listItem);\n  });\n\n  const lightbox = new SimpleLightbox(\".gallery-link\", {\n      captionsData: \"alt\",\n  });\n  lightbox.refresh(); \n}\n\nexport function smoothScroll() {\n  const firstCard = document.querySelector(\".gallery-item\");\n  \n  if (firstCard) {\n      const cardHeight = firstCard.getBoundingClientRect().height;\n      window.scrollBy({\n          top: cardHeight * 2,\n          behavior: \"smooth\",\n      });\n  }\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { fetchImages, resetPage, currentPage } from \"./js/pixabay-api\";  \nimport { showLoader, hideLoader, displayImages, clearGallery, smoothScroll } from \"./js/render-functions\";\n\nconst form = document.getElementById(\"search-form\");\nconst input = document.getElementById(\"search-input\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreButton = document.getElementById(\"load-more\"); \n\nlet searchQuery = \"\"; \n\nform.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    searchQuery = input.value.trim(); \n\n    if (searchQuery === \"\") {\n        iziToast.error({\n            title: \"Error\",\n            message: \"Please enter a search query!\",\n            position: \"topRight\",\n        });\n        return;\n    }\n\n    clearGallery();\n    loadMoreButton.classList.add(\"hidden\"); \n    showLoader(loader);\n    resetPage(); \n\n    try {\n        const response = await fetchImages(searchQuery);\n        const images = response.hits;\n        const totalPages = Math.ceil(response.totalHits / 40);  \n\n        if (images.length === 0) {\n            iziToast.error({\n                title: \"Error\",\n                message: \"No images found. Try another search!\",\n                position: \"topRight\",\n            });\n        } else {\n            displayImages(images); \n\n            if (currentPage < totalPages) { \n                loadMoreButton.classList.remove(\"hidden\");  \n            } else {\n                loadMoreButton.classList.add(\"hidden\");  \n            }\n        }\n    } catch (error) {\n        iziToast.error({\n            title: \"Error\",\n            message: \"Something went wrong. Please try again later!\",\n            position: \"topRight\",\n        });\n    } finally {\n        hideLoader(loader);\n    }\n});\n\nloadMoreButton.addEventListener(\"click\", async () => {\n    loadMoreButton.classList.add(\"hidden\");\n    showLoader(loader);\n\n    try {\n        const response = await fetchImages(searchQuery);\n        const images = response.hits;\n        const totalPages = Math.ceil(response.totalHits / 40);\n\n        if (images.length === 0 || currentPage >= totalPages) { \n            iziToast.info({\n                title: \"Info\",\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n            });\n            return;\n        } else {\n            displayImages(images);\n            smoothScroll();\n\n         \n            if (currentPage < totalPages) { \n                loadMoreButton.classList.remove(\"hidden\");  \n            } else {\n                loadMoreButton.classList.add(\"hidden\");  \n                iziToast.info({\n                    title: \"Info\",\n                    message: \"No more images to load.\",\n                    position: \"topRight\",\n                });\n            }\n        }\n    } catch (error) {\n        iziToast.error({\n            title: \"Error\",\n            message: \"Something went wrong. Please try again later!\",\n            position: \"topRight\",\n        });\n    } finally {\n        hideLoader(loader);\n    }\n});\n"],"names":["API_KEY","BASE_URL","currentPage","resetPage","fetchImages","query","params","response","axios","error","loader","showLoader","hideLoader","clearGallery","displayImages","images","gallery","image","listItem","SimpleLightbox","smoothScroll","firstCard","cardHeight","form","input","loadMoreButton","searchQuery","event","iziToast","totalPages"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,IAAIC,EAAc,EAElB,SAASC,GAAY,CACxBD,EAAc,CAClB,CAEO,eAAeE,EAAYC,EAAO,CACrC,MAAMC,EAAS,CACX,IAAKN,EACL,EAAGK,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMH,CACT,EAED,GAAI,CACA,MAAMK,EAAW,MAAMC,EAAM,IAAIP,EAAU,CAAE,OAAAK,EAAQ,EACrD,OAAAJ,GAAe,EACRK,EAAS,IACnB,OAAQE,EAAO,CACZ,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACd,CACA,CC3BA,MAAMC,EAAS,SAAS,cAAc,SAAS,EAExC,SAASC,GAAa,CACzBD,EAAO,UAAU,OAAO,QAAQ,CACpC,CAEO,SAASE,GAAa,CACzBF,EAAO,UAAU,IAAI,QAAQ,CACjC,CAEO,SAASG,GAAe,CAC3B,SAAS,eAAe,SAAS,EAAE,UAAY,EACnD,CAEO,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAAU,SAAS,eAAe,SAAS,EAEjDD,EAAO,QAAQE,GAAS,CACpB,MAAMC,EAAW,SAAS,cAAc,IAAI,EAC5CA,EAAS,UAAU,IAAI,cAAc,EAErCA,EAAS,UAAY;AAAA,iBACVD,EAAM,aAAa;AAAA,sBACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,2BAGjCA,EAAM,KAAK;AAAA,2BACXA,EAAM,KAAK;AAAA,8BACRA,EAAM,QAAQ;AAAA,+BACbA,EAAM,SAAS;AAAA;AAAA,IAIxCD,EAAQ,YAAYE,CAAQ,CAClC,CAAG,EAEgB,IAAIC,EAAe,gBAAiB,CACjD,aAAc,KACpB,CAAG,EACQ,QAAO,CAClB,CAEO,SAASC,GAAe,CAC7B,MAAMC,EAAY,SAAS,cAAc,eAAe,EAExD,GAAIA,EAAW,CACX,MAAMC,EAAaD,EAAU,sBAAqB,EAAG,OACrD,OAAO,SAAS,CACZ,IAAKC,EAAa,EAClB,SAAU,QACpB,CAAO,CACP,CACA,CClDA,MAAMC,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAQ,SAAS,eAAe,cAAc,EACrC,SAAS,cAAc,SAAS,EAC/C,MAAMC,EAAiB,SAAS,eAAe,WAAW,EAE1D,IAAIC,EAAc,GAElBH,EAAK,iBAAiB,SAAU,MAAOI,GAAU,CAI7C,GAHAA,EAAM,eAAgB,EACtBD,EAAcF,EAAM,MAAM,OAEtBE,IAAgB,GAAI,CACpBE,EAAS,MAAM,CACX,MAAO,QACP,QAAS,+BACT,SAAU,UACtB,CAAS,EACD,MACR,CAEIf,EAAc,EACdY,EAAe,UAAU,IAAI,QAAQ,EACrCd,EAAiB,EACjBR,IAEA,GAAI,CACA,MAAMI,EAAW,MAAMH,EAAYsB,CAAW,EACxCX,EAASR,EAAS,KAClBsB,EAAa,KAAK,KAAKtB,EAAS,UAAY,EAAE,EAEhDQ,EAAO,SAAW,EAClBa,EAAS,MAAM,CACX,MAAO,QACP,QAAS,uCACT,SAAU,UAC1B,CAAa,GAEDd,EAAcC,CAAM,EAEhBb,EAAc2B,EACdJ,EAAe,UAAU,OAAO,QAAQ,EAExCA,EAAe,UAAU,IAAI,QAAQ,EAGhD,MAAe,CACZG,EAAS,MAAM,CACX,MAAO,QACP,QAAS,gDACT,SAAU,UACtB,CAAS,CACT,QAAc,CACNhB,EAAiB,CACzB,CACA,CAAC,EAEDa,EAAe,iBAAiB,QAAS,SAAY,CACjDA,EAAe,UAAU,IAAI,QAAQ,EACrCd,EAAiB,EAEjB,GAAI,CACA,MAAMJ,EAAW,MAAMH,EAAYsB,CAAW,EACxCX,EAASR,EAAS,KAClBsB,EAAa,KAAK,KAAKtB,EAAS,UAAY,EAAE,EAEpD,GAAIQ,EAAO,SAAW,GAAKb,GAAe2B,EAAY,CAClDD,EAAS,KAAK,CACV,MAAO,OACP,QAAS,6DACT,SAAU,UAC1B,CAAa,EACD,MACZ,MACYd,EAAcC,CAAM,EACpBK,EAAc,EAGVlB,EAAc2B,EACdJ,EAAe,UAAU,OAAO,QAAQ,GAExCA,EAAe,UAAU,IAAI,QAAQ,EACrCG,EAAS,KAAK,CACV,MAAO,OACP,QAAS,0BACT,SAAU,UAC9B,CAAiB,EAGZ,MAAe,CACZA,EAAS,MAAM,CACX,MAAO,QACP,QAAS,gDACT,SAAU,UACtB,CAAS,CACT,QAAc,CACNhB,EAAiB,CACzB,CACA,CAAC"}